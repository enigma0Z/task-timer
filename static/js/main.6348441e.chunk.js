(this["webpackJsonptask-timer"]=this["webpackJsonptask-timer"]||[]).push([[0],{110:function(t,e,n){},111:function(t,e,n){},139:function(t,e,n){"use strict";n.r(e);var i=n(5),a=n(0),s=n.n(a),o=n(9),r=n.n(o),c=(n(110),n(21)),l=n(17),u=n(18),d=n(69),h=n(68),m=n(162),f=n(7),j=n(168),p=n(169),b=n(170),x=n(167),O=n(70),g=n(175),v=n(165),C=n(146),S=n(171),w=n(172),k=n(173),y=n(177),N=n(145),T=n(96),L=n.n(T),I=n(97),B=n.n(I),M=n(98),D=n.n(M),P=(n(111),n(178)),q=n(176),U=n(166),G=n(179),W=n(95),E=n.n(W),R=Object(f.a)((function(t){return Object(m.a)({fullWidth:{width:"100%"},centeringGrid:{display:"flex"},listItemText:{display:"block"},sliderSpacing:{width:"100%",justifyContent:"center",verticalAlign:"middle"},sliderLabelContainer:{marginBottom:-16},sliderLabel:{paddingRight:10}})}))(function(t){Object(d.a)(n,t);var e=Object(h.a)(n);function n(t){var i;return Object(c.a)(this,n),(i=e.call(this,t)).state={value:i.props.value,menuOpen:!1},i.handleOnChange=i.handleOnChange.bind(Object(u.a)(i)),i}return Object(l.a)(n,[{key:"handleOnChange",value:function(t,e){"number"===typeof e?this.setState({value:e}):"object"===typeof e&&this.setState({value:e[0]}),this.props.onChange(this.state.value)}},{key:"render",value:function(){var t=this,e=this.props.classes;return Object(i.jsxs)(P.a,{display:"flex",flexDirection:"column",children:[Object(i.jsxs)(q.a,{id:"simple-menu",keepMounted:!0,open:this.state.menuOpen,anchorEl:this.state.anchor,onClose:function(){t.setState({menuOpen:!1})},children:[Object(i.jsx)(U.a,{children:"Edit"}),Object(i.jsx)(U.a,{children:"Delete"})]}),Object(i.jsxs)(P.a,{display:"flex",flexDirection:"row",flex:"100%",alignItems:"baseline",className:e.sliderLabelContainer,children:[Object(i.jsx)(O.a,{variant:"subtitle1",className:e.sliderLabel,children:this.props.label}),Object(i.jsxs)(O.a,{variant:"caption",className:e.sliderLabel,children:["(",this.props.formatCallback(this.state.value),")"]})]}),Object(i.jsxs)(P.a,{display:"flex",flex:1,flexDirection:"row",children:[Object(i.jsx)(P.a,{m:1,flex:"100%",display:"flex",justifyContent:"flex-start",alignItems:"center",children:Object(i.jsx)(G.a,{value:this.state.value,step:this.props.step,min:this.props.min,max:this.props.max,onChange:this.handleOnChange,getAriaValueText:function(t){return"".concat(t,"m")},valueLabelDisplay:"off","aria-labelledby":"break-length"})}),Object(i.jsx)(P.a,{flex:1,display:"flex",justifyContent:"flex-end",alignItems:"center",children:Object(i.jsx)(x.a,{onClick:function(e){t.setState({anchor:e.currentTarget,menuOpen:!0})},children:Object(i.jsx)(E.a,{})})})]})]})}}]),n}(a.Component)),A=function(){function t(e,n,i,a,s,o){Object(c.a)(this,t),this.name=e,this.min=n,this.max=i,this.value=a,this.next=s,this.notification=o}return Object(l.a)(t,[{key:"setNext",value:function(t){this.next=t}}]),t}(),J=function(){function t(){Object(c.a)(this,t)}return Object(l.a)(t,null,[{key:"seconds",value:function(t){var e=Math.floor(t/60/60),n=Math.floor((t-60*e*60)/60),i=Math.floor(t-60*e*60-60*n),a=[];return e>0&&a.push("".concat(e,"h")),n>0&&a.push("".concat(n,"m")),a.push("".concat(i,"s")),a.join(" ")}},{key:"minutes",value:function(t){var e=Math.floor(t/60),n=t-60*e,i=[];return e>0&&i.push("".concat(e,"h")),i.push("".concat(n,"m")),i.join(" ")}}]),t}(),V="Task Timer",z=[new A("Work",1,90,50),new A("Break time",1,15,10)];z[0].setNext(z[1]),z[1].setNext(z[0]);var F=Object(f.a)((function(t){return Object(m.a)({root:{flexGrow:1},fillWidth:{width:"100%"},menuButton:{marginRight:t.spacing(2)},title:{flexGrow:1},gridContainer:{flexGrow:1,padding:8},paperContainer:{padding:8},sliderBox:{paddingTop:16},sideBar:{width:250}})}))(function(t){Object(d.a)(n,t);var e=Object(h.a)(n);function n(t){var i;return Object(c.a)(this,n),(i=e.call(this,t)).timer=void 0,i.notification=void 0,i.state={workLength:50,breakLength:10,running:!1,secondsLeft:0,sidebarOpen:!1,notificationSupport:"Notification"in window,countdowns:z,currentCountdown:z[0]},i.getButtonText=i.getButtonText.bind(Object(u.a)(i)),i.handleStartStopOnClick=i.handleStartStopOnClick.bind(Object(u.a)(i)),i.updateSecondsLeft=i.updateSecondsLeft.bind(Object(u.a)(i)),i.requestNotificationPermission=i.requestNotificationPermission.bind(Object(u.a)(i)),i}return Object(l.a)(n,[{key:"getButtonText",value:function(){return this.state.running?"Stop":"Start"}},{key:"getNextCountdown",value:function(){return void 0!==this.state.currentCountdown.next?this.state.currentCountdown.next:this.state.currentCountdown}},{key:"updateSecondsLeft",value:function(){if(void 0===this.state.endTime)return 0;var t=(this.state.endTime-Date.now())/1e3;this.state.running&&t>0?(this.setState({secondsLeft:Math.floor(t)}),localStorage.setItem("secondsLeft",Math.floor(t).toString()),this.setUpdateTimer()):this.stopTimer()}},{key:"setUpdateTimer",value:function(){var t=this;this.timer=setTimeout((function(){t.updateSecondsLeft()}),1e3)}},{key:"clearUpdateTimer",value:function(){clearTimeout(this.timer)}},{key:"startTimer",value:function(){var t=Date.now()+60*this.state.currentCountdown.value*1e3,e=60*this.state.currentCountdown.value;this.setState({running:!0,endTime:t,secondsLeft:e}),localStorage.setItem("running",(!0).toString()),localStorage.setItem("endTime",t.toString()),localStorage.setItem("secondsLeft",e.toString()),localStorage.setItem("currentCountdownName",this.state.currentCountdown.name),this.setUpdateTimer()}},{key:"stopTimer",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(t&&this.state.notificationSupport){var e=new Notification(V,{body:"".concat(this.state.currentCountdown.name," completed!")});e.onclick=function(t){e.close(),window.focus()}}this.setState({running:!1,secondsLeft:0,currentCountdown:this.getNextCountdown()}),localStorage.setItem("running",(!1).toString()),localStorage.setItem("secondsLeft","0"),localStorage.setItem("currentCountdownName",this.getNextCountdown().name),this.clearUpdateTimer()}},{key:"handleStartStopOnClick",value:function(){this.state.running?this.stopTimer(!1):this.startTimer()}},{key:"renderSliders",value:function(){return this.state.countdowns.map((function(t){return Object(i.jsx)(j.a,{item:!0,children:Object(i.jsx)(R,{label:t.name,labelSuffix:"m",value:t.value,step:1,min:t.min,max:t.max,onChange:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;n.value=e},formatCallback:function(t){return J.minutes(t)}})},t.name)}))}},{key:"requestNotificationPermission",value:function(){this.state.notificationSupport&&("default"===Notification.permission?Notification.requestPermission():"denied"===Notification.permission&&alert("Notifications have been disabled, enable them in your browser"))}},{key:"componentDidMount",value:function(){this.requestNotificationPermission();var t="true"===localStorage.getItem("running"),e=localStorage.getItem("endTime"),n=localStorage.getItem("secondsLeft"),i=this.state.countdowns.find((function(t){return t.name===localStorage.getItem("currentCountdownName")}));this.setState({running:t,endTime:e?parseInt(e):this.state.endTime,secondsLeft:n?parseInt(n):this.state.secondsLeft,currentCountdown:i||this.state.currentCountdown}),t&&this.setUpdateTimer()}},{key:"render",value:function(){var t=this,e=this.props.classes;return Object(i.jsxs)("div",{className:e.root,children:[Object(i.jsx)(p.a,{position:"static",children:Object(i.jsxs)(b.a,{children:[Object(i.jsx)(x.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu",onClick:function(){t.setState({sidebarOpen:!0})},children:Object(i.jsx)(L.a,{})}),Object(i.jsx)(O.a,{variant:"h6",className:e.title,children:V})]})}),Object(i.jsx)(g.a,{anchor:"left",open:this.state.sidebarOpen,onClose:function(){t.setState({sidebarOpen:!1})},children:Object(i.jsx)("div",{className:e.sideBar,children:Object(i.jsx)(v.a,{children:Object(i.jsxs)(C.a,{button:!0,onClick:this.requestNotificationPermission,children:[Object(i.jsx)(S.a,{children:Object(i.jsx)(B.a,{})}),Object(i.jsx)(w.a,{primary:"Notifications"}),Object(i.jsx)(k.a,{children:Object(i.jsx)(y.a,{edge:"end",onClick:this.requestNotificationPermission,checked:this.state.notificationSupport&&"granted"===Notification.permission,inputProps:{"aria-labelledby":"switch-list-label-bluetooth"},disabled:!1===this.state.notificationSupport})})]})})})}),Object(i.jsxs)(j.a,{container:!0,className:e.gridContainer,spacing:2,children:[Object(i.jsxs)(j.a,{item:!0,xs:12,lg:2,children:[" ",Object(i.jsx)(N.a,{className:e.paperContainer,children:Object(i.jsxs)(j.a,{container:!0,direction:"column",spacing:2,children:[Object(i.jsx)(j.a,{item:!0,children:Object(i.jsx)(O.a,{variant:"h5",children:"Timers"})}),Object(i.jsx)(j.a,{item:!0,children:this.renderSliders()}),Object(i.jsx)(j.a,{item:!0,children:Object(i.jsx)(D.a,{variant:"contained",className:e.fillWidth,onClick:this.handleStartStopOnClick,children:this.getButtonText()})})]})})," "]}),Object(i.jsx)(j.a,{item:!0,xs:!0,children:Object(i.jsxs)(N.a,{className:e.paperContainer,children:[Object(i.jsxs)(O.a,{variant:"h5",children:[this.state.running?"Running":"On deck",": ",this.state.currentCountdown.name]}),Object(i.jsxs)(O.a,{variant:"h6",children:["Time left ",J.seconds(this.state.secondsLeft)]}),Object(i.jsxs)(O.a,{variant:"caption",children:["Up next: ",this.getNextCountdown().name]})]})})]})]})}}]),n}(a.Component));r.a.render(Object(i.jsx)(s.a.StrictMode,{children:Object(i.jsx)(F,{})}),document.getElementById("root"))}},[[139,1,2]]]);
//# sourceMappingURL=main.6348441e.chunk.js.map