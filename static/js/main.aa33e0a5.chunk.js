(this["webpackJsonptask-timer"]=this["webpackJsonptask-timer"]||[]).push([[0],{117:function(e,t,n){},122:function(e,t,n){"use strict";n.r(t);var i=n(2),s=n(0),a=n.n(s),r=n(15),c=n.n(r),o=(n(117),n(9)),l=n(8),u=n(20),d=n(12),h=n(14),b=n(151),j=n(5),m=n(154),p=n(155),f=n(64),x=n(128),O=n(170),v=n(171),g=n(161),y=n(94),k=n(178),w=n(156),S=n(157),C=n(158),N=n(159),_=n(160),I=n(179),M=n(162),D=n(174),E=n(78),T=n.n(E),P=function(){function e(){Object(o.a)(this,e),this.subscribers=new Map,this.name=void 0}return Object(l.a)(e,[{key:"subscribe",value:function(e,t){console.debug("Subscribe",e,"to",this.constructor.name,this),this.subscribers.set(e,t)}},{key:"unsubscribe",value:function(e){console.debug("Unsubscribe",e,"from",this.constructor.name,this),this.subscribers.delete(e)}},{key:"updateSubscribers",value:function(){var e=this;this.subscribers.forEach((function(t,n,i){console.debug("Update Subscriber",n,"on",e.constructor.name,e),t(e)}))}}]),e}(),L=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this))._desktopNotificationSupport=!1,e.name="NotificationService",e._desktopNotificationSupport="Notification"in window,e}return Object(l.a)(n,null,[{key:"instance",get:function(){return this._instance||(this._instance=new this)}}]),Object(l.a)(n,[{key:"requestDesktopNotificationPermissions",value:function(){var e=this;this.desktopNotificationSupport&&"default"===Notification.permission&&Notification.requestPermission().then((function(t){e.updateSubscribers()}))}},{key:"showNotification",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e,t){e.close(),window.focus()},i=new Notification(e,t);i.onclick=function(e){return n(i,e)}}},{key:"desktopNotificationSupport",get:function(){return this._desktopNotificationSupport}},{key:"desktopNotificationEnabled",get:function(){return this.desktopNotificationSupport&&"granted"===Notification.permission}}]),n}(P);L._instance=void 0;var R,W,B=n(175),H=n(153),J=n(127),K=Object(j.a)((function(e){return Object(b.a)({modal:{display:"flex",alignItems:"center",justifyContent:"center",padding:8,border:"none"}})}))((W=R=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.classes;return Object(i.jsx)(B.a,{open:this.props.open,onClose:this.props.onClose,closeAfterTransition:!0,className:e.modal,BackdropComponent:H.a,BackdropProps:{timeout:500},children:Object(i.jsx)(J.a,{in:this.props.open,children:Object(i.jsx)(m.a,{className:e.modal,children:Object(i.jsxs)(p.a,{container:!0,direction:"column",alignItems:"center",alignContent:"center",children:[Object(i.jsx)(p.a,{item:!0,xs:!0,children:Object(i.jsx)(f.a,{variant:"h4",children:this.props.title})}),Object(i.jsxs)(p.a,{item:!0,xs:!0,children:[Object(i.jsx)(f.a,{variant:"subtitle1",children:this.props.subtitle}),Object(i.jsx)("br",{})]}),Object(i.jsx)(x.a,{color:"secondary",variant:"contained",onClick:this.props.onConfirm,children:Object(i.jsx)(p.a,{item:!0,xs:!0,children:this.props.buttonText})})]})})})})}}]),n}(s.Component),R.defaultProps={title:"Are you sure?",subtitle:"This action cannot be undone",buttonText:"Continue"},W)),F=n(23),A=n(45),G=function(){function e(t){var n=t.name,i=t.start,s=t.end;Object(o.a)(this,e),this.name=void 0,this.start=void 0,this.end=void 0,this.name=n,this.start=i,this.end=s}return Object(l.a)(e,[{key:"durationMs",get:function(){return this.end-this.start}}]),e}(),U=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var i;if(Object(o.a)(this,n),(i=t.call(this)).items=[],i.name="HistoryItemCollection",null===e||void 0===e?void 0:e.items){var s,a=Object(A.a)(e.items);try{for(a.s();!(s=a.n()).done;){var r=s.value;i.addItem(r)}}catch(c){a.e(c)}finally{a.f()}}return i}return Object(l.a)(n,[{key:"toJSON",value:function(){return{items:this.items}}},{key:"addItem",value:function(e){this.items.push(new G(e)),this.updateSubscribers()}},{key:"today",get:function(){var e=new Date(Date.now());return this.items.filter((function(t){var n=new Date(t.start);return n.getFullYear()===e.getFullYear()&&n.getMonth()===e.getMonth()&&n.getDay()===e.getDay()}))}}]),n}(P),z=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n),(e=t.call(this)).name="HistoryService",e._history=void 0;var i=localStorage.getItem("history");return e._history=i?new U(JSON.parse(i)):new U,e}return Object(l.a)(n,[{key:"history",get:function(){return this._history}},{key:"items",get:function(){return this.history.items}}],[{key:"instance",get:function(){return this._instance||(this._instance=new this)}}]),Object(l.a)(n,[{key:"save",value:function(){localStorage.setItem("history",JSON.stringify(this.history)),this.updateSubscribers()}},{key:"addItem",value:function(e){this._history.addItem(e),this.save()}},{key:"clear",value:function(){this._history=new U,this.save()}}]),n}(P);z._instance=void 0;var q=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var i;return Object(o.a)(this,n),(i=t.call(this)).timeout=void 0,i._startTime=void 0,i._endTime=void 0,i._running=!1,i._paused=!1,i._name="NEW",i._min=1,i._max=90,i._value=0,i._intervalMs=1e3,i.runningCallback=void 0,i._startTime=e.startTime,i._endTime=e.endTime,i._running=!0===e.running,i._paused=!0===e.paused,i._name=e.name?e.name:"NEW",i._min=e.min?e.min:1,i._max=e.max?e.max:90,i._value=e.value?e.value:i._min,i._intervalMs=e.intervalMs?e.intervalMs:1e3,i.runningCallback=e.runningCallback,i}return Object(l.a)(n,[{key:"toJSON",value:function(){return{startTime:this.startTime,endTime:this.endTime,running:this.running,paused:this.paused,name:this.name,min:this.min,max:this.max,value:this.value,intervalMs:this.intervalMs}}},{key:"start",value:function(){this._running=!0,this._startTime=Date.now(),this._endTime=this._startTime+60*this.value*1e3,this.update()}},{key:"stop",value:function(){this._running=!1,this._paused=!1,this.update()}},{key:"pause",value:function(){this.running&&(this._paused=!this._paused,this.paused||(this._endTime=Date.now()+1e3*this.secondsLeft),this.update())}},{key:"update",value:function(){var e=this;if(void 0!==this.endTime&&!this.paused)if(this.runningCallback&&this.runningCallback(this),this.secondsLeft>0)this.timeout=setTimeout((function(){return e.update()}),this.intervalMs);else{this._running=!1,this._endTime=Date.now();var t=Date.now();this.startTime&&this.endTime&&(t>this.endTime&&(t=this.endTime),z.instance.addItem({name:this.name,start:this.startTime,end:t})),clearTimeout(this.timeout)}this.updateSubscribers()}},{key:"name",get:function(){return this._name},set:function(e){this._name=e,this.updateSubscribers()}},{key:"running",get:function(){return this._running}},{key:"paused",get:function(){return this._paused}},{key:"value",get:function(){return this._value},set:function(e){this._value=e}},{key:"min",get:function(){return this._min?this._min:1},set:function(e){this._min=e,this.updateSubscribers()}},{key:"max",get:function(){return this._max?this._max:90},set:function(e){this._max=e,this.updateSubscribers()}},{key:"intervalMs",get:function(){return this._intervalMs?this._intervalMs:1e3}},{key:"startTime",get:function(){return this._startTime}},{key:"endTime",get:function(){return this._endTime}},{key:"secondsLeft",get:function(){return this.running&&this.endTime?Math.floor((this.endTime-Date.now())/1e3):0}}]),n}(P),V=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var i,s;if(Object(o.a)(this,n),(s=t.call(this))._items=[],s._currentIndex=0,s.running=!1,s.name="CountdownCollection",null===e||void 0===e?void 0:e.items){var a,r=Object(A.a)(e.items);try{for(r.s();!(a=r.n()).done;){var c=a.value;s.addItem(c)}}catch(l){r.e(l)}finally{r.f()}}return(null===e||void 0===e?void 0:e.currentIndex)&&(s._currentIndex=e.currentIndex),s._currentIndex>s.items.length-1&&(s._currentIndex=0),(null===(i=s.current)||void 0===i?void 0:i.running)&&(s.running=!0),s}return Object(l.a)(n,[{key:"toJSON",value:function(){return{items:this.items,currentIndex:this.currentIndex}}},{key:"countdownSubscriber",value:function(e){this.current.running?this.running=!0:this.running&&(this._currentIndex=this.nextIndex,this.running=!1),this.updateSubscribers()}},{key:"addItem",value:function(e){var t=this;if(null!==e){var n=new q(e);n.subscribe(this.name,(function(e){t.countdownSubscriber(e)})),this.items.push(n)}this.updateSubscribers()}},{key:"deleteItem",value:function(e){delete this.items[e],this.updateSubscribers()}},{key:"swapItems",value:function(e,t){var n,i;if(e<t)n=e,i=t;else{if(!(t<e))throw new RangeError("Cannot swap an element with itself");n=t,i=e}this.currentIndex===n?this._currentIndex=i:this.currentIndex===i&&(this._currentIndex=n),this._items=[].concat(Object(F.a)(this.items.slice(0,n)),[this.items[i],this.items[n]],Object(F.a)(this.items.slice(i+1))),this.updateSubscribers()}},{key:"getItem",value:function(e){return this.items[e]}},{key:"items",get:function(){return this._items}},{key:"currentIndex",get:function(){return this._currentIndex}},{key:"current",get:function(){return this.items[this.currentIndex]}},{key:"previousIndex",get:function(){return(this.items.length+this.currentIndex-1)%this.items.length}},{key:"previous",get:function(){return this.items[this.previousIndex]}},{key:"nextIndex",get:function(){return(this.currentIndex+1)%this.items.length}},{key:"next",get:function(){return this.items[this.nextIndex]}},{key:"runningCountdown",get:function(){return this.items.filter((function(e){return e.running}))[0]}}]),n}(P),Y={items:[{name:"Work",min:1,max:90,value:50},{name:"Break time",min:1,max:15,value:10}]},Q=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this))._countdowns=new V,e.name="CountdownService",e.load(),e}return Object(l.a)(n,[{key:"countdowns",get:function(){return this._countdowns}},{key:"items",get:function(){return this.countdowns.items}}],[{key:"instance",get:function(){return this._instance||(this._instance=new this)}}]),Object(l.a)(n,[{key:"load",value:function(){var e=this,t=localStorage.getItem(this.name);if(t)this._countdowns=new V(JSON.parse(t));else{var n=localStorage.getItem("countdowns"),i=localStorage.getItem("currentCountdown");n&&(this._countdowns=new V({items:JSON.parse(n),currentIndex:i?parseInt(i):0}))}this._countdowns.subscribe(this.name,(function(){e.save()})),this.save()}},{key:"save",value:function(){localStorage.setItem(this.name,JSON.stringify(this.countdowns)),this.updateSubscribers()}},{key:"reset",value:function(){this._countdowns=new V(Y),this.save()}}]),n}(P);Q._instance=void 0;var X,Z,$=L.instance,ee=Object(j.a)((function(e){return Object(b.a)({sideBar:{width:250},footer:{top:"auto",bottom:0,width:"100%",padding:8},footerButton:{width:"100%"}})}))(function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var i;return Object(o.a)(this,n),(i=t.call(this,e)).state={notificationsEnabled:$.desktopNotificationEnabled,confirmResetOpen:!1,confirmClearHistoryOpen:!1},i}return Object(l.a)(n,[{key:"refreshNotificationState",value:function(){this.state.notificationsEnabled!==$.desktopNotificationEnabled&&this.setState({notificationsEnabled:$.desktopNotificationEnabled})}},{key:"componentDidUpdate",value:function(){this.refreshNotificationState()}},{key:"componentDidMount",value:function(){var e=this;$.subscribe("NotificationService",(function(){e.refreshNotificationState()}))}},{key:"componentWillUnmount",value:function(){$.unsubscribe("NotificationService")}},{key:"render",value:function(){var e=this,t=this.props.classes;return Object(i.jsxs)(k.a,{anchor:"left",open:this.props.open,onClose:function(){return e.props.onClose()},children:[Object(i.jsx)(K,{open:this.state.confirmResetOpen,onClose:function(){e.setState({confirmResetOpen:!1}),e.props.onClose()},onConfirm:function(){Q.instance.reset(),e.setState({confirmResetOpen:!1}),e.props.onClose()},subtitle:"Resetting your countdowns cannot be undone"}),Object(i.jsx)(K,{open:this.state.confirmClearHistoryOpen,onClose:function(){e.setState({confirmClearHistoryOpen:!1}),e.props.onClose()},onConfirm:function(){z.instance.clear(),e.setState({confirmClearHistoryOpen:!1}),e.props.onClose()},subtitle:"Clearing history cannot be undone"}),Object(i.jsx)("div",{className:t.sideBar,children:Object(i.jsxs)(w.a,{children:[Object(i.jsxs)(S.a,{button:!0,onClick:function(){$.requestDesktopNotificationPermissions()},children:[Object(i.jsx)(C.a,{children:Object(i.jsx)(T.a,{})}),Object(i.jsx)(N.a,{primary:"Notifications"}),Object(i.jsx)(_.a,{children:Object(i.jsx)(I.a,{edge:"end",onClick:function(){$.requestDesktopNotificationPermissions()},checked:this.state.notificationsEnabled,inputProps:{"aria-labelledby":"switch-list-label-bluetooth"},onFocus:function(){return e.refreshNotificationState()},onBlur:function(){return e.refreshNotificationState()},disabled:!$.desktopNotificationSupport})})]}),Object(i.jsx)(M.a,{}),Object(i.jsx)(S.a,{button:!0,onClick:function(){e.setState({confirmClearHistoryOpen:!0})},children:Object(i.jsx)(N.a,{primary:"Clear history"})}),Object(i.jsx)(S.a,{button:!0,onClick:function(){e.setState({confirmResetOpen:!0})},children:Object(i.jsx)(N.a,{primary:"Reset to defaults"})})]})}),Object(i.jsx)(D.a,{position:"fixed",className:t.footer,children:Object(i.jsx)(x.a,{children:Object(i.jsxs)(f.a,{variant:"caption",children:["Version ","1.1.3"," (what's new)"]})})})]})}}]),n}(s.Component)),te=n(91),ne=n.n(te),ie=n(92),se=n(21),ae=n(173),re=n(163),ce=n(164),oe=n(165),le=n(166),ue=n(167),de=n(168),he=function(){function e(){Object(o.a)(this,e)}return Object(l.a)(e,null,[{key:"seconds",value:function(e){var t=Math.floor(e/60/60),n=Math.floor((e-60*t*60)/60),i=Math.floor(e-60*t*60-60*n),s=[];return t>0&&s.push("".concat(t,"h")),n>0&&s.push("".concat(n,"m")),s.push("".concat(i,"s")),s.join(" ")}},{key:"minutes",value:function(e){var t=Math.floor(e/60),n=e-60*t,i=[];return t>0&&i.push("".concat(t,"h")),i.push("".concat(n,"m")),i.join(" ")}}]),e}(),be=Object(j.a)((function(e){return Object(b.a)({})}))(function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(i.jsxs)(D.a,{flexDirection:"column",flex:2,display:"flex",alignItems:"center",children:[Object(i.jsx)(D.a,{display:"flex",children:Object(i.jsx)(f.a,{variant:"caption",children:this.props.caption})}),Object(i.jsx)(D.a,{display:"flex",children:Object(i.jsx)(f.a,{variant:"subtitle1",children:this.props.text})})]})}}]),n}(s.Component)),je=Object(j.a)((function(e){return Object(b.a)({table:{minWidth:400},totalsGrid:{flexGrow:1,padding:8}})}))(function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var i;return Object(o.a)(this,n),(i=t.call(this,e)).name="HistoryList",i.state={history:z.instance.history},i}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;z.instance.subscribe(this.name,(function(){e.setState({history:z.instance.history})}))}},{key:"componentWillUnmount",value:function(){z.instance.unsubscribe(this.name)}},{key:"render",value:function(){var e,t=this,n=this.props.classes,s={},a=Object(A.a)(this.state.history.today.map((function(e){return e.name})).sort());try{var r=function(){var n=e.value;n in s||(s[n]=t.state.history.today.filter((function(e){return e.name===n})).map((function(e){return e.durationMs})).reduce((function(e,t){return e+t})))};for(a.s();!(e=a.n()).done;)r()}catch(c){a.e(c)}finally{a.f()}return Object(i.jsxs)(p.a,{container:!0,spacing:2,className:n.totalsGrid,children:[Object(i.jsx)(p.a,{item:!0,xs:2,children:Object(i.jsx)(D.a,{flexDirection:"column",display:"flex",alignItems:"center",justifyContent:"center",height:"100%",children:Object(i.jsx)(f.a,{variant:"h5",children:"Totals"})})}),Object.keys(s).map((function(e){return Object(i.jsx)(p.a,{item:!0,xs:2,children:Object(i.jsx)(y.a,{children:Object(i.jsx)(be,{caption:e,text:"".concat(he.seconds(s[e]/1e3))})})},e)})),Object(i.jsx)(p.a,{item:!0,xs:12,children:Object(i.jsx)(re.a,{children:Object(i.jsxs)(ce.a,{className:n.table,size:"small","aria-label":"a dense table",children:[Object(i.jsx)(oe.a,{children:Object(i.jsxs)(le.a,{children:[Object(i.jsx)(ue.a,{children:"Task Name"}),Object(i.jsx)(ue.a,{align:"right",children:"Duration"}),Object(i.jsx)(ue.a,{align:"right",children:"Start"}),Object(i.jsx)(ue.a,{align:"right",children:"End"})]})}),Object(i.jsx)(de.a,{children:this.state.history.today.map((function(e){var t=new Date(e.start),n=new Date(e.end);return Object(i.jsxs)(le.a,{children:[Object(i.jsx)(ue.a,{component:"th",scope:"row",children:e.name}),Object(i.jsx)(ue.a,{align:"right",children:he.seconds(e.durationMs/1e3)}),Object(i.jsx)(ue.a,{align:"right",children:"".concat(t.getHours(),":").concat(t.getMinutes(),":").concat(t.getSeconds())}),Object(i.jsx)(ue.a,{align:"right",children:"".concat(n.getHours(),":").concat(n.getMinutes(),":").concat(n.getSeconds())})]},e.name+e.start)}))})]})})})]})}}]),n}(s.Component)),me=n(169),pe=n(83),fe=n.n(pe),xe=n(82),Oe=n.n(xe),ve=n(84),ge=n.n(ve),ye=n(86),ke=n.n(ye),we=n(85),Se=n.n(we),Ce=n(90),Ne=n.n(Ce),_e=n(88),Ie=n.n(_e),Me=n(87),De=n.n(Me),Ee=n(89),Te=n.n(Ee),Pe=n(180),Le=n(176),Re=n(172),We=n(79),Be=n.n(We),He=n(81),Je=n.n(He),Ke=n(80),Fe=n.n(Ke),Ae=Object(j.a)((function(e){return Object(b.a)({fullWidth:{width:"100%"},centeringGrid:{display:"flex"},listItemText:{display:"block"},sliderSpacing:{width:"100%",justifyContent:"center",verticalAlign:"middle"},sliderLabelContainer:{marginBottom:-16},sliderLabel:{paddingRight:10},editPopover:{padding:8},editContainer:{paddingRight:8}})}))((Z=X=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var i;return Object(o.a)(this,n),(i=t.call(this,e)).popoverRef=void 0,i.state={value:i.props.value,label:i.props.label,editLabel:i.props.label,min:i.props.min,editMin:i.props.min,max:i.props.max,editMax:i.props.max,step:i.props.step,menuOpen:!1,editing:i.props.editing,labelError:!1,minError:!1,maxError:!1},i.popoverRef=a.a.createRef(),i.handleOnChange=i.handleOnChange.bind(Object(u.a)(i)),i.handleKeyPress=i.handleKeyPress.bind(Object(u.a)(i)),i.openPopover=i.openPopover.bind(Object(u.a)(i)),i.closePopover=i.closePopover.bind(Object(u.a)(i)),i.saveForm=i.saveForm.bind(Object(u.a)(i)),i.cancelEdit=i.cancelEdit.bind(Object(u.a)(i)),i}return Object(l.a)(n,[{key:"getMinError",value:function(e,t){return isNaN(e)||e<1||e>t}},{key:"getMaxError",value:function(e,t){return isNaN(t)||t<1||t<e}},{key:"handleOnChange",value:function(e,t){"number"===typeof t?(this.setState({value:t}),this.props.onChange(t)):"object"===typeof t&&(this.setState({value:t[0]}),this.props.onChange(t[0]))}},{key:"handleKeyPress",value:function(e){"Enter"===e.key&&this.saveForm()}},{key:"openPopover",value:function(){this.setState({editing:!0,editLabel:this.state.label,editMin:this.state.min,editMax:this.state.max})}},{key:"closePopover",value:function(){this.setState({editing:!1})}},{key:"saveForm",value:function(){var e;this.state.labelError||this.state.minError||this.state.maxError||(e=this.state.value>this.state.editMax?this.state.editMax:this.state.value<this.state.editMin?this.state.editMin:this.state.value,this.props.onEditSave(this.state.editLabel,this.state.editMin,this.state.editMax),this.setState({value:e,label:this.state.editLabel,min:this.state.editMin,max:this.state.editMax}),this.closePopover())}},{key:"cancelEdit",value:function(){this.setState({labelError:!1,minError:!1,maxError:!1}),this.closePopover()}},{key:"renderNormalView",value:function(){var e=this,t=this.props.classes;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)(D.a,{display:"flex",flexDirection:"row",flex:"100%",alignItems:"baseline",className:t.sliderLabelContainer,children:[Object(i.jsx)(f.a,{variant:"subtitle1",className:t.sliderLabel,children:this.state.label}),Object(i.jsxs)(f.a,{variant:"caption",className:t.sliderLabel,children:["(",this.props.formatCallback(this.state.value),")"]})]}),Object(i.jsxs)(D.a,{display:"flex",flex:1,flexDirection:"row",children:[Object(i.jsx)(D.a,{m:1,flex:"100%",display:"flex",justifyContent:"flex-start",alignItems:"center",children:Object(i.jsx)(Pe.a,{value:this.state.value,step:this.state.step,min:this.state.min,max:this.state.max,onChange:this.handleOnChange,getAriaValueText:function(e){return"".concat(e,"m")},valueLabelDisplay:"off","aria-labelledby":"break-length"})}),Object(i.jsx)(D.a,{flex:1,display:"flex",justifyContent:"flex-end",alignItems:"center",children:Object(i.jsx)(g.a,{onClick:function(t){e.openPopover()},children:Object(i.jsx)(Be.a,{})})})]})]})}},{key:"renderEditPopover",value:function(){var e=this,t=this.props.classes;return Object(i.jsx)(Le.a,{open:this.state.editing,anchorEl:this.popoverRef.current,anchorOrigin:{vertical:"center",horizontal:"left"},transformOrigin:{vertical:"center",horizontal:"left"},onClose:this.cancelEdit,onEscapeKeyDown:this.cancelEdit,children:Object(i.jsxs)(D.a,{display:"flex",flex:1,flexDirection:"row",className:t.editPopover,children:[Object(i.jsxs)(p.a,{container:!0,children:[Object(i.jsx)(p.a,{item:!0,xs:6,className:t.editContainer,children:Object(i.jsx)(Re.a,{fullWidth:!0,label:"Name",error:this.state.labelError,value:this.state.editLabel,margin:"dense",size:"small",variant:"outlined",onChange:function(t){e.setState({editLabel:t.target.value,labelError:""===t.target.value})},onKeyPress:this.handleKeyPress})}),Object(i.jsx)(p.a,{item:!0,xs:3,className:t.editContainer,children:Object(i.jsx)(Re.a,{label:"Min",error:this.state.minError,value:this.state.editMin,size:"small",variant:"outlined",margin:"dense",onChange:function(t){var n=parseInt(t.target.value);e.setState({editMin:n||0,minError:e.getMinError(n,e.state.max),maxError:e.getMaxError(n,e.state.max)})},onKeyPress:this.handleKeyPress})}),Object(i.jsx)(p.a,{item:!0,xs:3,className:t.editContainer,children:Object(i.jsx)(Re.a,{label:"Max",error:this.state.maxError,value:this.state.editMax,size:"small",variant:"outlined",margin:"dense",onChange:function(t){var n=parseInt(t.target.value);e.setState({editMax:n||0,minError:e.getMinError(e.state.min,n),maxError:e.getMaxError(e.state.min,n)})},onKeyPress:this.handleKeyPress})})]}),Object(i.jsxs)(D.a,{flex:1,display:"flex",justifyContent:"flex-end",alignItems:"center",children:[Object(i.jsx)(g.a,{onClick:this.saveForm,children:Object(i.jsx)(Fe.a,{color:"primary"})}),Object(i.jsx)(g.a,{onClick:this.cancelEdit,children:Object(i.jsx)(Je.a,{color:"secondary"})})]})]})})}},{key:"render",value:function(){return Object(i.jsxs)("div",{ref:this.popoverRef,children:[" ",Object(i.jsxs)(D.a,{display:"flex",flexDirection:"column",children:[this.renderNormalView(),this.renderEditPopover()]})]})}}]),n}(s.Component),X.defaultProps={editing:!1},Z)),Ge=n(123),Ue=n(124),ze=function(){function e(t){Object(o.a)(this,e),this.grid=void 0,this.grid=t||{top:1}}return Object(l.a)(e,[{key:"top",get:function(){return this.grid.top?this.grid.top:1}},{key:"left",get:function(){return this.grid.left?this.grid.left:1}},{key:"bottom",get:function(){return this.grid.bottom?this.grid.bottom:1}},{key:"right",get:function(){return this.grid.right?this.grid.right:1}},{key:"middle",get:function(){return this.grid.middle?this.grid.middle:1}},{key:"center",get:function(){return this.grid.center?this.grid.center:1}}]),e}(),qe=Object(Ue.a)((function(e){return Object(Ge.a)({container:{width:"100%",height:"100%"}})}))(function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var i;return Object(o.a)(this,n),(i=t.call(this,e)).spacing=void 0,i.spacing=new ze(e.spacing),i}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.classes;return Object(i.jsx)(B.a,{open:this.props.open,onClose:this.props.onClose,closeAfterTransition:!0,BackdropComponent:H.a,BackdropProps:{timeout:500},children:Object(i.jsx)(J.a,{in:this.props.open,children:Object(i.jsxs)(D.a,{display:"flex",flexDirection:"column",className:e.container,children:[Object(i.jsx)(D.a,{flex:this.spacing.top,onClick:this.props.onClose}),Object(i.jsx)(D.a,{flex:this.spacing.middle,children:Object(i.jsxs)(D.a,{display:"flex",flexDirection:"row",className:e.container,children:[Object(i.jsx)(D.a,{flex:this.spacing.left,onClick:this.props.onClose}),Object(i.jsx)(D.a,{flex:this.spacing.center,children:this.props.children}),Object(i.jsx)(D.a,{flex:this.spacing.right,onClick:this.props.onClose})]})}),Object(i.jsx)(D.a,{flex:this.spacing.bottom,onClick:this.props.onClose})]})})})}}]),n}(s.Component)),Ve=Object(j.a)((function(e){return Object(b.a)({popperCardStyle:{paddingLeft:e.spacing(1),backgroundColor:e.palette.grey[50],margin:8,height:"100%"},modalStyle:{padding:8,height:"100%"},fillWidth:{width:"100%"}})}))(function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var i,s,a,r;(Object(o.a)(this,n),(a=t.call(this,e)).notificationService=void 0,a.state={countdowns:Q.instance.countdowns,editingOrder:!1,completeModalOpen:!1,confirmDeleteOpen:!1,confirmDeleteIndex:0,confirmDeleteName:"",running:null===(i=Q.instance.countdowns.current)||void 0===i?void 0:i.running,paused:!1,warningNotificationSent:!1},null===(s=Q.instance.countdowns.current)||void 0===s?void 0:s.running)&&(null===(r=Q.instance.countdowns.runningCountdown)||void 0===r||r.update());return a.notificationService=L.instance,a.handleStartStopOnClick=a.handleStartStopOnClick.bind(Object(u.a)(a)),a.countdownSubscriber=a.countdownSubscriber.bind(Object(u.a)(a)),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;Q.instance.subscribe("CountdownComponent",(function(){e.countdownSubscriber()}))}},{key:"componentWillUnmount",value:function(){Q.instance.unsubscribe("CountdownComponent")}},{key:"handleStartStopOnClick",value:function(){this.state.running?this.stop():this.start()}},{key:"start",value:function(){var e=this;this.setState({running:!0}),Q.instance.countdowns.current.runningCallback=function(t){t.secondsLeft>0?!e.state.warningNotificationSent&&t.secondsLeft<300&&t.secondsLeft>240&&(e.setState({warningNotificationSent:!0}),e.notificationService.showNotification(Ye,{body:"Stopping soon: ".concat(Q.instance.countdowns.current.name)})):t.running&&(L.instance.showNotification(Ye,{body:"Complete: ".concat(Q.instance.countdowns.current.name)}),e.setState({completeModalOpen:!0}))},Q.instance.countdowns.current.start()}},{key:"stop",value:function(){this.setState({running:!1}),Q.instance.countdowns.current.stop()}},{key:"countdownSubscriber",value:function(){this.setState({countdowns:Q.instance.countdowns}),Q.instance.countdowns.current.running?(this.setState({running:!0}),window.document.title="".concat(Qe," [").concat(Q.instance.countdowns.current.name," ").concat(he.seconds(Q.instance.countdowns.current.secondsLeft),"]")):(this.setState({warningNotificationSent:!1,paused:!1,running:!1}),window.document.title=Qe)}},{key:"renderSliders",value:function(){var e=this,t=this.props.classes,n=[],s=function(s){var a=parseInt(s),r=Q.instance.countdowns.items[s],c=0===a,o=a===Q.instance.countdowns.items.length-1;e.state.editingOrder?n.push(Object(i.jsx)(p.a,{item:!0,children:Object(i.jsx)(m.a,{className:t.popperCardStyle,children:Object(i.jsxs)(D.a,{display:"flex",flexDirection:"row",children:[Object(i.jsx)(D.a,{flex:"100%",display:"flex",justifyContent:"left",alignItems:"center",children:Object(i.jsx)(f.a,{variant:"button",children:r.name})}),Object(i.jsxs)(D.a,{flex:1,display:"flex",justifyContent:"right",justifyItems:"right",children:[Object(i.jsx)(g.a,{color:"primary",disabled:c,onClick:function(){Q.instance.countdowns.swapItems(a,a-1)},children:Object(i.jsx)(Oe.a,{})}),Object(i.jsx)(g.a,{color:"primary",disabled:o,onClick:function(){Q.instance.countdowns.swapItems(a,a+1)},children:Object(i.jsx)(fe.a,{})}),Object(i.jsx)(g.a,{color:"secondary",onClick:function(){e.setState({confirmDeleteOpen:!0,confirmDeleteIndex:a,confirmDeleteName:r.name})},children:Object(i.jsx)(ge.a,{})})]})]})})},r.name)):n.push(Object(i.jsx)(p.a,{item:!0,children:Object(i.jsx)(Ae,{label:r.name,labelSuffix:"m",value:r.value,step:1,min:r.min,max:r.max,onChange:function(e){r.value=e},onEditSave:function(e,t,n){r.name=e,r.min=t,r.max=n},formatCallback:function(e){return he.minutes(e)}})},r.name))};for(var a in Q.instance.countdowns.items)s(a);return n}},{key:"render",value:function(){var e,t,n,s=this,a=this.props.classes;return Object(i.jsxs)(p.a,{container:!0,children:[Object(i.jsx)(K,{open:this.state.confirmDeleteOpen,onClose:function(){s.setState({confirmDeleteOpen:!1})},onConfirm:function(){Q.instance.countdowns.deleteItem(s.state.confirmDeleteIndex),s.setState({confirmDeleteOpen:!1})},subtitle:"Deleting this cannot be undone"}),Object(i.jsx)(qe,{open:this.state.completeModalOpen,onClose:function(){s.setState({completeModalOpen:!1})},spacing:{middle:1,center:10},children:Object(i.jsx)(m.a,{style:{height:"100%",padding:8},children:Object(i.jsxs)(D.a,{display:"flex",flexDirection:"column",style:{height:"100%"},children:[Object(i.jsx)(D.a,{display:"flex",flex:2,justifyContent:"center",alignItems:"center",children:Object(i.jsxs)(f.a,{variant:"h4",children:[Q.instance.countdowns.previous.name," complete!"]})}),Object(i.jsx)(D.a,{display:"flex",flex:1,justifyContent:"center",children:Object(i.jsx)(x.a,{variant:"contained",color:"primary",style:{width:"100%"},onClick:function(){s.start(),s.setState({completeModalOpen:!1})},children:Object(i.jsxs)(f.a,{variant:"h5",children:["Start ",Q.instance.countdowns.current.name]})})})]})})}),Object(i.jsx)(p.a,{item:!0,xs:12,children:Object(i.jsxs)(D.a,{display:"flex",flexDirection:"row",children:[Object(i.jsx)(D.a,{flex:"100%",children:Object(i.jsx)(f.a,{variant:"h3",children:" Timers "})}),Object(i.jsx)(D.a,{flex:1,children:Object(i.jsx)(g.a,{disabled:this.state.editingOrder,onClick:function(){Q.instance.countdowns.addItem({name:"NEW ".concat(Q.instance.countdowns.items.length)})},children:Object(i.jsx)(Se.a,{color:this.state.editingOrder?"disabled":"primary"})})}),Object(i.jsx)(D.a,{flex:1,children:Object(i.jsx)(g.a,{onClick:function(){s.setState({editingOrder:!s.state.editingOrder})},children:Object(i.jsx)(ke.a,{color:this.state.editingOrder?"primary":"action"})})})]})}),Object(i.jsx)(p.a,{item:!0,xs:12,children:this.renderSliders()}),Object(i.jsx)(p.a,{item:!0,xs:12,sm:3,children:Object(i.jsxs)(me.a,{className:a.fillWidth,variant:"contained",color:this.state.running?this.state.paused?"default":"secondary":"primary",children:[Object(i.jsx)(x.a,{className:a.fillWidth,onClick:this.handleStartStopOnClick,children:this.state.running?Object(i.jsx)(De.a,{}):Object(i.jsx)(Ie.a,{})}),Object(i.jsx)(x.a,{className:a.fillWidth,disabled:!this.state.running,onClick:function(){s.state.running&&(Q.instance.countdowns.current.pause(),s.setState({paused:!s.state.paused}))},children:this.state.paused?Object(i.jsx)(Te.a,{}):Object(i.jsx)(Ne.a,{})})]})}),Object(i.jsx)(p.a,{item:!0,xs:4,sm:3,children:Object(i.jsx)(be,{caption:this.state.running?this.state.paused?"Paused":"Running":"On deck",text:(null===(e=Q.instance.countdowns.current)||void 0===e?void 0:e.name)||"NONE"})}),Object(i.jsx)(p.a,{item:!0,xs:4,sm:3,children:Object(i.jsx)(be,{caption:"Time left",text:he.seconds(null===(t=Q.instance.countdowns.current)||void 0===t?void 0:t.secondsLeft)})}),Object(i.jsx)(p.a,{item:!0,xs:4,sm:3,children:Object(i.jsx)(be,{caption:"Up next",text:(null===(n=Q.instance.countdowns.next)||void 0===n?void 0:n.name)||"NONE"})})]})}}]),n}(s.Component)),Ye="Task Timer",Qe="TT",Xe=L.instance,Ze=Object(j.a)((function(e){return Object(b.a)({root:{flexGrow:1,overflow:"hidden"},fillWidth:{width:"100%"},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},gridContainer:{flexGrow:1,padding:8},paperContainer:{padding:8},sliderBox:{paddingTop:16},popperCardStyle:{paddingLeft:e.spacing(1),backgroundColor:e.palette.grey[50],margin:8,height:"100%"},popperContentsStyle:{marginRight:8},modal:{display:"flex",alignItems:"center",justifyContent:"center",padding:8,border:"none",width:"100%",height:"100%"},statusStyle:{marginTop:-.5,marginBottom:-1}})}))(function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var i;Object(o.a)(this,n),(i=t.call(this,e)).sliderRefs=[];var s=localStorage.getItem("selectedDate"),a=localStorage.getItem("version");return i.state={workLength:50,breakLength:10,running:!1,paused:!1,secondsLeft:0,sidebarOpen:!1,notificationSupport:"Notification"in window,editingOrder:!1,confirmDeleteOpen:!1,confirmDeleteIndex:0,confirmDeleteName:"",confirmResetOpen:!1,warningNotificationSent:!1,selectedDate:s?new Date(JSON.parse(s)):new Date(0,0,0,12,0,10),whatsNewModalOpen:"1.1.3"!==a},i.checkSchedule=i.checkSchedule.bind(Object(u.a)(i)),i}return Object(l.a)(n,[{key:"componentDidMount",value:function(){Xe.requestDesktopNotificationPermissions(),localStorage.setItem("version","1.1.3"),this.checkSchedule()}},{key:"checkSchedule",value:function(){var e=this,t=new Date;t.getHours()===this.state.selectedDate.getHours()&&t.getMinutes()===this.state.selectedDate.getMinutes()&&Xe.showNotification(Ye,{body:"It's lunchtime!"}),setTimeout((function(){return e.checkSchedule()}),5e4)}},{key:"render",value:function(){var e=this,t=this.props.classes;return Object(i.jsxs)("div",{className:t.root,children:[Object(i.jsx)(qe,{open:this.state.whatsNewModalOpen,onClose:function(){console.log("App.tsx onClose()"),e.setState({whatsNewModalOpen:!1})},spacing:{top:{xs:1,md:2},middle:{xs:1,md:1},center:{xs:5,md:1},bottom:{xs:1,md:2}},children:Object(i.jsx)(m.a,{className:t.modal,children:Object(i.jsxs)(p.a,{container:!0,direction:"column",alignItems:"center",alignContent:"center",children:[Object(i.jsx)(p.a,{item:!0,xs:!0,children:Object(i.jsxs)(f.a,{variant:"h4",children:["Version ","1.1.3"]})}),Object(i.jsxs)(p.a,{item:!0,xs:!0,children:[Object(i.jsx)(f.a,{variant:"body1",children:"Task Timer has been updated since the last time you were here. Click below to see what's new!"})," ",Object(i.jsx)("br",{})]}),Object(i.jsx)(p.a,{item:!0,xs:!0,children:Object(i.jsx)(x.a,{variant:"contained",href:"/WHATS_NEW.html",target:"_blank",onClick:function(){e.setState({whatsNewModalOpen:!1})},children:"See what's new!"})})]})})}),Object(i.jsx)(O.a,{position:"static",children:Object(i.jsxs)(v.a,{children:[Object(i.jsx)(g.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"menu",onClick:function(){e.setState({sidebarOpen:!0})},children:Object(i.jsx)(ne.a,{})}),Object(i.jsx)(f.a,{variant:"h6",className:t.title,children:Ye})]})}),Object(i.jsx)(ee,{open:this.state.sidebarOpen,onClose:function(){e.setState({sidebarOpen:!1})}}),Object(i.jsxs)(p.a,{container:!0,className:t.gridContainer,spacing:2,children:[Object(i.jsx)(p.a,{item:!0,xs:12,md:8,children:Object(i.jsx)(y.a,{className:t.paperContainer,children:Object(i.jsx)(Ve,{})})}),Object(i.jsx)(p.a,{item:!0,xs:12,md:4,children:Object(i.jsx)(y.a,{className:t.paperContainer,children:Object(i.jsxs)(p.a,{container:!0,children:[Object(i.jsx)(p.a,{item:!0,xs:12,children:Object(i.jsx)(f.a,{variant:"h3",children:"Schedule"})}),Object(i.jsx)(p.a,{item:!0,xs:12,children:Object(i.jsx)(se.a,{utils:ie.a,children:Object(i.jsx)(ae.a,{id:"lunch-time-picker",label:"Lunch",value:this.state.selectedDate,onChange:function(t){e.setState({selectedDate:t}),localStorage.setItem("selectedDate",JSON.stringify(t))},minutesStep:5})})})]})})}),Object(i.jsx)(p.a,{item:!0,xs:12,md:8,children:Object(i.jsx)(y.a,{className:t.paperContainer,children:Object(i.jsxs)(p.a,{container:!0,children:[Object(i.jsx)(p.a,{item:!0,xs:12,children:Object(i.jsx)(f.a,{variant:"h3",children:"History"})}),Object(i.jsx)(p.a,{item:!0,xs:12,children:Object(i.jsx)(je,{})})]})})})]})]})}}]),n}(s.Component));c.a.render(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(Ze,{})}),document.getElementById("root"))}},[[122,1,2]]]);
//# sourceMappingURL=main.aa33e0a5.chunk.js.map